# SOME DESCRIPTIVE TITLE.
# Copyright (C) 
# This file is distributed under the same license as the Tarantool package.
# FIRST AUTHOR <EMAIL@ADDRESS>, YEAR.
#
#, fuzzy
msgid ""
msgstr ""
"Project-Id-Version: Tarantool 2.3\n"
"Report-Msgid-Bugs-To: \n"
"POT-Creation-Date: 2020-02-04 10:02+0000\n"
"PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n"
"Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
"Language-Team: LANGUAGE <LL@li.org>\n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"

#: ../doc/book/cartridge/cartridge_admin.rst:5
msgid "Tarantool Cartridge administrator's guide"
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:7
msgid "This guide explains how to deploy and manage a Tarantool cluster with Tarantool Cartridge."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:12
msgid "For more information on managing Tarantool instances, see the :ref:`Server administration <admin>` section."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:15
msgid "Before deploying the cluster, familiarize yourself with the notion of :ref:`cluster roles <cartridge-roles>` and :ref:`deploy Tarantool instances <cartridge-deploy>` according to the desired cluster topology."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:24
msgid "Deploying the cluster"
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:26
msgid "To deploy the cluster, first, :ref:`configure <cartridge-config>` your Tarantool instances according to the desired cluster topology, for example:"
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:29
msgid "my_app.router: {\"advertise_uri\": \"localhost:3301\", \"http_port\": 3301, \"workdir\": \"./tmp/router\"}\n"
"my_app.storage_A_master: {\"advertise_uri\": \"localhost:3302\", \"http_enabled\": False, \"workdir\": \"./tmp/storage-a-master\"}\n"
"my_app.storage_A_replica: {\"advertise_uri\": \"localhost:3303\", \"http_enabled\": False, \"workdir\": \"./tmp/storage-a-replica\"}\n"
"my_app.storage_B_master: {\"advertise_uri\": \"localhost:3304\", \"http_enabled\": False, \"workdir\": \"./tmp/storage-b-master\"}\n"
"my_app.storage_B_replica: {\"advertise_uri\": \"localhost:3305\", \"http_enabled\": False, \"workdir\": \"./tmp/storage-b-replica\"}"
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:37
msgid "Then :ref:`start the instances <cartridge-run>`, for example using ``cartridge`` CLI:"
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:40
msgid "cartridge start my_app --cfg demo.yml --run_dir ./tmp/run --foreground"
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:44
msgid "And bootstrap the cluster. You can do this via the Web interface which is available at ``http://<instance_hostname>:<instance_http_port>`` (in this example, ``http://localhost:3301``)."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:49
msgid "In the web interface, do the following:"
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:51
msgid "Depending on the authentication state:"
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:53
msgid "If enabled (in production), enter your credentials and click **Login**:"
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:60
msgid "If disabled (for easier testing), simply proceed to configuring the cluster."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:63
msgid "Click **Сonfigure** next to the first unconfigured server to create the first replica set -- solely for the router (intended for *compute-intensive* workloads)."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:70
#: ../doc/book/cartridge/cartridge_admin.rst:82
#: ../doc/book/cartridge/cartridge_admin.rst:97
#: ../doc/book/cartridge/cartridge_admin.rst:170
#: ../doc/book/cartridge/cartridge_admin.rst:470
#: ../doc/book/cartridge/cartridge_admin.rst:513
msgid "|nbsp|"
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:72
msgid "In the pop-up window, check the ``vshard-router`` role -- or any custom role that has ``vshard-router`` as a dependent role (in this example, this is a custom role named ``app.roles.api``)."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:76
msgid "(Optional) Specify a display name for the replica set, for example ``router``."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:86
msgid "As described in the :ref:`built-in roles section <cartridge-built-in-roles>`, it is a good practice to enable workload-specific cluster roles on instances running on physical servers with workload-specific hardware."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:90
msgid "Click **Create replica set** and see the newly-created replica set in the web interface:"
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:101
msgid "Be careful: after an instance joins a replica set, you **CAN NOT** revert this or make the instance join any other replica set."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:104
msgid "Create another replica set -- for a master storage node (intended for *transaction-intensive* workloads)."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:107
msgid "Check the ``vshard-storage`` role -- or any custom role that has ``vshard-storage`` as a dependent role (in this example, this is a custom role named ``app.roles.storage``)."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:111
msgid "(Optional) Check a specific group, for example ``hot``. Replica sets with ``vshard-storage`` roles can belong to different groups. In our example, these are ``hot`` or ``cold`` groups meant to process hot and cold data independently. These groups are specified in the cluster's :ref:`configuration file <cartridge-vshard-groups>`; by default, a cluster has no groups."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:118
msgid "(Optional) Specify a display name for the replica set, for example ``hot-storage``."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:120
msgid "Click **Create replica set**."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:126
msgid "(Optional) If required by topology, populate the second replica set with more storage nodes:"
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:129
msgid "Click **Configure** next to another unconfigured server dedicated for *transaction-intensive* workloads."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:132
msgid "Click **Join Replica Set** tab."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:134
msgid "Select the second replica set, and click **Join replica set** to add the server to it."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:141
msgid "Depending on cluster topology:"
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:143
msgid "add more instances to the first or second replica sets, or"
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:144
msgid "create more replica sets and populate them with instances meant to handle a specific type of workload (compute or transactions)."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:147
msgid "For example:"
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:153
msgid "(Optional) By default, all new ``vshard-storage`` replica sets get a weight of ``1`` before the ``vshard`` bootstrap in the next step."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:158
msgid "In case you add a new replica set after ``vshard`` bootstrap, as described in the :ref:`topology change section <cartridge-change-cluster-topology>`, it will get a weight of 0 by default."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:162
msgid "To make different replica sets store different numbers of buckets, click **Edit** next to a replica set, change its default weight, and click **Save**:"
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:172
msgid "For more information on buckets and replica set's weights, see the :ref:`vshard module documentation <vshard>`."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:175
msgid "Bootstrap ``vshard`` by clicking the corresponding button, or by saying ``cartridge.admin.boostrap_vshard()`` over the administrative console."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:178
msgid "This command creates virtual buckets and distributes them among storages."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:180
msgid "From now on, all cluster configuration can be done via the web interface."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:186
msgid "Updating the configuration"
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:188
msgid "Cluster configuration is specified in a YAML configuration file. This file includes cluster topology and role descriptions."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:191
msgid "All instances in Tarantool cluster have the same configuration. To this end, every instance stores a copy of the configuration file, and the cluster keeps these copies in sync: as you submit updated configuration in the Web interface, the cluster validates it (and rejects inappropriate changes) and distributes **automatically** across the cluster."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:197
msgid "To update the configuration:"
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:199
msgid "Click **Configuration files** tab."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:201
msgid "(Optional) Click **Downloaded** to get hold of the current configuration file."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:203
msgid "Update the configuration file."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:205
msgid "You can add/change/remove any sections except system ones: ``topology``, ``vshard``, and ``vshard_groups``."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:208
msgid "To remove a section, simply remove it from the configuration file."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:210
msgid "Compress the configuration file as a ``.zip`` archive and click **Upload configuration** button to upload it."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:213
msgid "You will see a message in the lower part of the screen saying whether configuration was uploaded successfully, and an error description if the new configuration was not applied."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:221
msgid "Managing the cluster"
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:223
msgid "This chapter explains how to:"
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:225
msgid "change the cluster topology,"
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:226
msgid "enable automatic failover,"
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:227
msgid "switch the replica set's master manually,"
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:228
msgid "deactivate replica sets, and"
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:229
msgid "expel instances."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:235
msgid "Changing the cluster topology"
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:237
msgid "Upon adding a newly deployed instance to a new or existing replica set:"
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:239
msgid "The cluster validates the configuration update by checking if the new instance is available using the `membership module <https://www.tarantool.io/en/doc/2.3/reference/reference_rock/membership/>`_."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:244
msgid "The ``membership`` module works over the UDP protocol and can operate before the ``box.cfg`` function is called."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:247
msgid "All the nodes in the cluster must be healthy for validation success."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:249
msgid "The new instance waits until another instance in the cluster receives the configuration update and discovers it, again, using the ``membership`` module. On this step, the new instance does not have a UUID yet."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:253
msgid "Once the instance realizes its presence is known to the cluster, it calls the ``box.cfg`` function and starts living its life."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:256
msgid "For more information, see the :ref:`box.cfg submodule reference <box_introspection-box_cfg>`."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:259
msgid "An optimal strategy for connecting new nodes to the cluster is to deploy a new zero-weight replica set instance by instance, and then increase the weight. Once the weight is updated and all cluster nodes are notified of the configuration change, buckets start migrating to new nodes."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:264
msgid "To populate the cluster with more nodes, do the following:"
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:266
msgid "Deploy new Tarantool instances as described in the :ref:`deployment section <cartridge-deploy>`."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:269
msgid "If new nodes do not appear in the Web interface, click **Probe server** and specify their URIs manually."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:276
msgid "If a node is accessible, it will appear in the list."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:278
msgid "In the Web interface:"
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:280
msgid "Create a new replica set with one of the new instances: click **Configure** next to an unconfigured server, check the necessary roles, and click **Create replica set**:"
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:286
msgid "In case you are adding a new ``vshard-storage`` instance, remember that all such instances get a ``0`` weight by default after the ``vshard`` bootstrap which happened during the initial cluster deployment."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:294
msgid "Or add the instances to existing replica sets: click **Configure** next to an unconfigured server, click **Join replica set** tab, select a replica set, and click **Join replica set**."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:298
msgid "If necessary, repeat this for more instances to reach the desired redundancy level."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:301
msgid "In case you are deploying a new ``vshard-storage`` replica set, populate it with data when you are ready: click **Edit** next to the replica set in question, increase its weight, and click **Save** to start :ref:`data rebalancing <cartridge-rebalance-data>`."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:306
msgid "As an alternative to the web interface, you can view and change cluster topology via GraphQL. The cluster's endpoint for serving GraphQL queries is ``/admin/api``. You can use any third-party GraphQL client like `GraphiQL <https://github.com/graphql/graphiql>`_ or `Altair <https://altair.sirmuel.design>`_."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:312
msgid "Examples:"
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:314
msgid "listing all servers in the cluster:"
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:316
msgid "query {\n"
"    servers { alias uri uuid }\n"
"}"
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:322
msgid "listing all replica sets with their servers:"
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:324
msgid "query {\n"
"    replicasets {\n"
"        uuid\n"
"        roles\n"
"        servers { uri uuid }\n"
"    }\n"
"}"
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:334
msgid "joining a server to a new replica set with a storage role enabled:"
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:336
msgid "mutation {\n"
"    join_server(\n"
"        uri: \"localhost:33003\"\n"
"        roles: [\"vshard-storage\"]\n"
"    )\n"
"}"
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:349
msgid "Data rebalancing"
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:351
msgid "Rebalancing (resharding) is initiated periodically and upon adding a new replica set with a non-zero weight to the cluster. For more information, see the :ref:`rebalancing process section <vshard-rebalancing>` of the ``vshard`` module documentation."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:356
msgid "The most convenient way to trace through the process of rebalancing is to monitor the number of active buckets on storage nodes. Initially, a newly added replica set has 0 active buckets. After a few minutes, the background rebalancing process begins to transfer buckets from other replica sets to the new one. Rebalancing continues until the data is distributed evenly among all replica sets."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:362
msgid "To monitor the current number of buckets, connect to any Tarantool instance over the :ref:`administrative console <cartridge-manage-sharding-cli>`, and say:"
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:365
msgid "tarantool> vshard.storage.info().bucket\n"
"---\n"
"- receiving: 0\n"
"  active: 1000\n"
"  total: 1000\n"
"  garbage: 0\n"
"  sending: 0\n"
"..."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:376
msgid "The number of buckets may be increasing or decreasing depending on whether the rebalancer is migrating buckets to or from the storage node."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:379
msgid "For more information on the monitoring parameters, see the :ref:`monitoring storages section <cartridge-monitor-storage>`."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:386
msgid "Deactivating replica sets"
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:388
msgid "To deactivate an entire replica set (e.g., to perform maintenance on it) means to move all of its buckets to other sets."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:391
msgid "To deactivate a set, do the following:"
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:393
msgid "Click **Edit** next to the set in question."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:395
msgid "Set its weight to ``0`` and click **Save**:"
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:401
msgid "Wait for the rebalancing process to finish migrating all the set's buckets away. You can monitor the current bucket number as described in the :ref:`data rebalancing section <cartridge-rebalance-data>`."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:409
msgid "Expelling instances"
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:414
msgid "Once an instance is *expelled*, it can never participate in the cluster again as every instance will reject it."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:417
msgid "To expel an instance, click **...** next to it, then click **Expel server** and **Expel**:"
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:428
msgid "Enabling automatic failover"
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:430
msgid "In a master-replica cluster configuration with automatic failover enabled, if the user-specified master of any replica set fails, the cluster automatically chooses the next replica from the priority list and grants it the active master role (read/write). When the failed master comes back online, its role is restored and the active master, again, becomes a replica (read-only). This works for any roles."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:437
msgid "To set the priority in a replica set:"
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:439
msgid "Click **Edit** next to the replica set in question."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:441
msgid "Scroll to the bottom of the **Edit replica set** box to see the list of servers."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:444
msgid "Drag replicas to their place in the priority list, and click **Save**:"
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:450
msgid "The failover is disabled by default. To enable it:"
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:452
msgid "Click **Failover**:"
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:458
msgid "In the **Failover control** box, click **Enable**:"
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:464
msgid "The failover status will change to enabled:"
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:472
msgid "For more information, see the :ref:`replication section <replication>`."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:478
msgid "Switching the replica set's master"
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:480
msgid "To manually switch the master in a replica set:"
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:482
msgid "Click the **Edit** button next to the replica set in question:"
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:488
msgid "Scroll to the bottom of the **Edit replica set** box to see the list of servers. The server on the top is the master."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:495
msgid "Drag a required server to the top position and click **Save**."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:497
msgid "The new master will automatically enter the read/write mode, while the ex-master will become read-only. This works for any roles."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:504
msgid "Managing users"
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:506
msgid "On the **Users** tab, you can enable/disable authentication as well as add, remove, edit, and view existing users who can access the web interface."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:515
msgid "Notice that the **Users** tab is available only if authorization in the web interface is :ref:`implemented <cartridge-auth-enable>`."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:518
msgid "Also, some features (like deleting users) can be disabled in the cluster configuration; this is regulated by the `auth_backend_name <https://www.tarantool.io/en/rocks/cluster/1.0/modules/cluster/#cfg-opts-box-opts>`_ option passed to ``cartridge.cfg()``."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:527
msgid "Resolving conflicts"
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:529
msgid "Tarantool has an embedded mechanism for asynchronous replication. As a consequence, records are distributed among the replicas with a delay, so conflicts can arise."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:532
msgid "To prevent conflicts, the special trigger ``space.before_replace`` is used. It is executed every time before making changes to the table for which it was configured. The trigger function is implemented in the Lua programming language. This function takes the original and new values of the tuple to be modified as its arguments. The returned value of the function is used to change the result of the operation: this will be the new value of the modified tuple."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:539
msgid "For insert operations, the old value is absent, so ``nil`` is passed as the first argument."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:542
msgid "For delete operations, the new value is absent, so ``nil`` is passed as the second argument. The trigger function can also return ``nil``, thus turning this operation into delete."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:546
msgid "This example shows how to use the ``space.before_replace`` trigger to prevent replication conflicts. Suppose we have a ``box.space.test`` table that is modified in multiple replicas at the same time. We store one payload field in this table. To ensure consistency, we also store the last modification time in each tuple of this table and set the ``space.before_replace`` trigger, which gives preference to newer tuples. Below is the code in Lua:"
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:553
msgid "fiber = require('fiber')\n"
"-- define a function that will modify the function test_replace(tuple)\n"
"        -- add a timestamp to each tuple in the space\n"
"        tuple = box.tuple.new(tuple):update{{'!', 2, fiber.time()}}\n"
"        box.space.test:replace(tuple)\n"
"end\n"
"box.cfg{ } -- restore from the local directory\n"
"-- set the trigger to avoid conflicts\n"
"box.space.test:before_replace(function(old, new)\n"
"        if old ~= nil and new ~= nil and new[2] < old[2] then\n"
"                return old -- ignore the request\n"
"        end\n"
"        -- otherwise apply as is\n"
"end)\n"
"box.cfg{ replication = {...} } -- subscribe"
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:575
msgid "Monitoring cluster via CLI"
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:577
msgid "This section describes parameters you can monitor over the administrative console."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:584
msgid "Connecting to nodes via CLI"
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:586
msgid "Each Tarantool node (``router``/``storage``) provides an administrative console (Command Line Interface) for debugging, monitoring, and troubleshooting. The console acts as a Lua interpreter and displays the result in the human-readable YAML format. To connect to a Tarantool instance via the console, say:"
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:591
msgid "$ tarantoolctl connect <instance_hostname>:<port>"
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:595
msgid "where the ``<instance_hostname>:<port>`` is the instance's URI."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:601
msgid "Monitoring storages"
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:603
msgid "Use ``vshard.storage.info()`` to obtain information on storage nodes."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:609
#: ../doc/book/cartridge/cartridge_admin.rst:782
msgid "Output example"
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:611
msgid "tarantool> vshard.storage.info()\n"
"---\n"
"- replicasets:\n"
"    <replicaset_2>:\n"
"    uuid: <replicaset_2>\n"
"    master:\n"
"        uri: storage:storage@127.0.0.1:3303\n"
"    <replicaset_1>:\n"
"    uuid: <replicaset_1>\n"
"    master:\n"
"        uri: storage:storage@127.0.0.1:3301\n"
"  bucket: <!-- buckets status\n"
"    receiving: 0 <!-- buckets in the RECEIVING state\n"
"    active: 2 <!-- buckets in the ACTIVE state\n"
"    garbage: 0 <!-- buckets in the GARBAGE state (are to be deleted)\n"
"    total: 2 <!-- total number of buckets\n"
"    sending: 0 <!-- buckets in the SENDING state\n"
"  status: 1 <!-- the status of the replica set\n"
"  replication:\n"
"    status: disconnected <!-- the status of the replication\n"
"    idle: <idle>\n"
"  alerts:\n"
"  - ['MASTER_IS_UNREACHABLE', 'Master is unreachable: disconnected']"
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:641
#: ../doc/book/cartridge/cartridge_admin.rst:811
msgid "Status list"
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:649
#: ../doc/book/cartridge/cartridge_admin.rst:819
msgid "**Code**"
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:649
#: ../doc/book/cartridge/cartridge_admin.rst:819
msgid "**Critical level**"
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:649
#: ../doc/book/cartridge/cartridge_admin.rst:819
msgid "**Description**"
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:651
#: ../doc/book/cartridge/cartridge_admin.rst:821
msgid "0"
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:651
#: ../doc/book/cartridge/cartridge_admin.rst:821
msgid "Green"
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:651
msgid "A replica set works in a regular way."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:653
#: ../doc/book/cartridge/cartridge_admin.rst:823
msgid "1"
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:653
#: ../doc/book/cartridge/cartridge_admin.rst:823
msgid "Yellow"
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:653
msgid "There are some issues, but they don’t affect a replica set efficiency (worth noticing, but don't require immediate intervention)."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:658
#: ../doc/book/cartridge/cartridge_admin.rst:826
msgid "2"
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:658
#: ../doc/book/cartridge/cartridge_admin.rst:826
msgid "Orange"
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:658
msgid "A replica set is in a degraded state."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:660
#: ../doc/book/cartridge/cartridge_admin.rst:828
msgid "3"
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:660
#: ../doc/book/cartridge/cartridge_admin.rst:828
msgid "Red"
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:660
msgid "A replica set is disabled."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:667
#: ../doc/book/cartridge/cartridge_admin.rst:835
msgid "Potential issues"
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:669
msgid "``MISSING_MASTER`` — No master node in the replica set configuration."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:671
#: ../doc/book/cartridge/cartridge_admin.rst:845
#: ../doc/book/cartridge/cartridge_admin.rst:854
msgid "**Critical level:** Orange."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:673
msgid "**Cluster condition:** Service is degraded for data-change requests to the replica set."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:676
msgid "**Solution:** Set the master node for the replica set in the configuration using API."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:678
msgid "``UNREACHABLE_MASTER`` — No connection between the master and the replica."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:680
#: ../doc/book/cartridge/cartridge_admin.rst:725
msgid "**Critical level:**"
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:682
msgid "If idle value doesn’t exceed T1 threshold (1 s.) — Yellow,"
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:683
msgid "If idle value doesn’t exceed T2 threshold (5 s.) — Orange,"
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:684
msgid "If idle value exceeds T3 threshold (10 s.) — Red."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:686
msgid "**Cluster condition:** For read requests to replica, the data may be obsolete compared with the data on master."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:689
msgid "**Solution:** Reconnect to the master: fix the network issues, reset the current master, switch to another master."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:692
msgid "``LOW_REDUNDANCY`` — Master has access to a single replica only."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:694
#: ../doc/book/cartridge/cartridge_admin.rst:712
#: ../doc/book/cartridge/cartridge_admin.rst:750
#: ../doc/book/cartridge/cartridge_admin.rst:865
msgid "**Critical level:** Yellow."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:696
msgid "**Cluster condition:** The data storage redundancy factor is equal to 2. It is lower than the minimal recommended value for production usage."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:699
msgid "**Solution:** Check cluster configuration:"
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:701
msgid "If only one master and one replica are specified in the configuration, it is recommended to add at least one more replica to reach the redundancy factor of 3."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:704
msgid "If three or more replicas are specified in the configuration, consider checking the replicas' states and network connection among the replicas."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:707
msgid "``INVALID_REBALANCING`` — Rebalancing invariant was violated. During migration, a storage node can either send or receive buckets. So it shouldn’t be the case that a replica set sends buckets to one replica set and receives buckets from another replica set at the same time."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:714
msgid "**Cluster condition:** Rebalancing is on hold."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:716
msgid "**Solution:** There are two possible reasons for invariant violation:"
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:718
msgid "The ``rebalancer`` has crashed."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:719
msgid "Bucket states were changed manually."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:721
msgid "Either way, please contact Tarantool support."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:723
msgid "``HIGH_REPLICATION_LAG`` — Replica’s lag exceeds T1 threshold (1 sec.)."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:727
msgid "If the lag doesn’t exceed T1 threshold (1 sec.) — Yellow;"
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:728
msgid "If the lag exceeds T2 threshold (5 sec.) — Orange."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:730
#: ../doc/book/cartridge/cartridge_admin.rst:740
msgid "**Cluster condition:** For read-only requests to the replica, the data may be obsolete compared with the data on the master."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:733
#: ../doc/book/cartridge/cartridge_admin.rst:743
msgid "**Solution:** Check the replication status of the replica. Further instructions are given in the :ref:`Tarantool troubleshooting guide <admin-troubleshooting-guide>`."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:736
msgid "``OUT_OF_SYNC`` — Mal-synchronization occured. The lag exceeds T3 threshold (10 sec.)."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:738
msgid "**Critical level:** Red."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:748
msgid "``UNREACHABLE_REPLICA`` — One or multiple replicas are unreachable."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:752
msgid "**Cluster condition:** Data storage redundancy factor for the given replica set is less than the configured factor. If the replica is next in the queue for rebalancing (in accordance with the weight configuration), the requests are forwarded to the replica that is still next in the queue."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:757
msgid "**Solution:** Check the error message and find out which replica is unreachable. If a replica is disabled, enable it. If this doesn’t help, consider checking the network."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:761
msgid "``UNREACHABLE_REPLICASET`` — All replicas except for the current one are unreachable. **Critical level:** Red."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:764
msgid "**Cluster condition:** The replica stores obsolete data."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:766
msgid "**Solution:** Check if the other replicas are enabled. If all replicas are enabled, consider checking network issues on the master. If the replicas are disabled, check them first: the master might be working properly."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:774
msgid "Monitoring routers"
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:776
msgid "Use ``vshard.router.info()`` to obtain information on the router."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:784
msgid "tarantool> vshard.router.info()\n"
"---\n"
"- replicasets:\n"
"    <replica set UUID>:\n"
"      master:\n"
"        status: <available / unreachable / missing>\n"
"        uri: <!-- URI of master\n"
"        uuid: <!-- UUID of instance\n"
"      replica:\n"
"        status: <available / unreachable / missing>\n"
"        uri: <!-- URI of replica used for slave requests\n"
"        uuid: <!-- UUID of instance\n"
"      uuid: <!-- UUID of replica set\n"
"    <replica set UUID>: ...\n"
"    ...\n"
"  status: <!-- status of router\n"
"  bucket:\n"
"    known: <!-- number of buckets with the known destination\n"
"    unknown: <!-- number of other buckets\n"
"  alerts: [<alert code>, <alert description>], ..."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:821
msgid "The ``router`` works in a regular way."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:823
msgid "Some replicas sre unreachable (affects the speed of executing read requests)."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:826
msgid "Service is degraded for changing data."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:828
msgid "Service is degraded for reading data."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:839
msgid "Depending on the nature of the issue, use either the UUID of a replica, or the UUID of a replica set."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:842
msgid "``MISSING_MASTER`` — The master in one or multiple replica sets is not specified in the configuration."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:847
#: ../doc/book/cartridge/cartridge_admin.rst:856
msgid "**Cluster condition:** Partial degrade for data-change requests."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:849
msgid "**Solution:** Specify the master in the configuration."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:851
msgid "``UNREACHABLE_MASTER`` — The ``router`` lost connection with the master of one or multiple replica sets."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:858
msgid "**Solution:** Restore connection with the master. First, check if the master is enabled. If it is, consider checking the network."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:861
msgid "``SUBOPTIMAL_REPLICA`` — There is a replica for read-only requests, but this replica is not optimal according to the configured weights. This means that the optimal replica is unreachable."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:867
msgid "**Cluster condition:** Read-only requests are forwarded to a backup replica."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:869
msgid "**Solution:** Check the status of the optimal replica and its network connection."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:871
msgid "``UNREACHABLE_REPLICASET`` — A replica set is unreachable for both read-only and data-change requests."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:874
msgid "**Critical Level:** Red."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:876
msgid "**Cluster condition:** Partial degrade for read-only and data-change requests."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:878
msgid "**Solution:** The replica set has an unreachable master and replica. Check the error message to detect this replica set. Then fix the issue in the same way as for :ref:`UNREACHABLE_REPLICA <unreachable_replica>`."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:886
msgid "Troubleshooting"
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:888
msgid "Please see the :ref:`Troubleshooting guide <admin-troubleshooting-guide>`."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:894
msgid "Disaster recovery"
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:896
msgid "Please see the section :ref:`Disaster recovery <admin-disaster_recovery>`."
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:902
msgid "Backups"
msgstr ""

#: ../doc/book/cartridge/cartridge_admin.rst:904
msgid "Please see the section :ref:`Backups <admin-backups>`."
msgstr ""

